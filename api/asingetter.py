import csv

def extract_asin(url):
    try:
        # Find the position of /dp/ and the following ? or end of string
        dp_index = url.find('/dp/')
        if dp_index == -1:
            return None
        
        # Start after /dp/
        start = dp_index + 4
        
        # Find end position (either ? or end of string)
        end = url.find('?', start)
        if end == -1:
            end = len(url)
            
        # Extract ASIN
        asin = url[start:end]
        
        # Validate ASIN format (typically 10 characters)
        if len(asin) == 10:
            return asin
        return None
    
    except Exception:
        return None

def get_asins_from_string(urls_string):
    urls = urls_string.split()  # Split the string by spaces or newlines
    asins = []
    for url in urls:
        asin = extract_asin(url)
        if asin:
            asins.append(asin)
    return asins

def save_asins_to_csv(asins, filename='amazon_asins.csv'):
    # Write ASINs to CSV with header
    with open(filename, 'w', newline='') as file:
        writer = csv.writer(file)
        writer.writerow(['ASIN'])  # Header
        for asin in asins:
            writer.writerow([asin])


# Example usage
if __name__ == "__main__":
    urls_string = "https://www.amazon.com/700W-Modular-Cooling-Protections-Warranty/dp/B0CZRMY588?crid=2FMTJ0UWOTNC2&dib=eyJ2IjoiMSJ9.C9SLVUjv0r18icXkkOoAidlO9At97Aeiv2I29DnqQCXw71hEG5zbPcXVjumWyXj5sFNQuG-CmcCXroB6UWff3zoKR29EQicGfBRU0tPYoXBleHRkdHbrhuwdlZW6bDPDzk5lpS59pP41jVyKfIx_AbK5hnlPgD4n6-DNnD_BQKbvOO-Y0yf6jdAtrsqrxKUw1SA6QwjtBfZB7WHJIs8i3cf3XGmGUwbfwWncYfbmwf8SQHBH00rSa2IbWueOikqFVirja-bLsThNGMnxK9UFvJfPjVoDl62XTxLLOUI-Tug.cLMy32cC1XaBYIwDTHMgUokdbqQet91mtvUHMt2vbCs&dib_tag=se&keywords=psu&qid=1731618301&refinements=p_72%3A1248879011&rnid=1248877011&s=electronics&sprefix=psu%2Caps%2C191&sr=1-18&th=1 https://www.amazon.com/ASUS-Titanium-Modular-Compatible-Warranty/dp/B0DHFVYNZC?crid=2FMTJ0UWOTNC2&dib=eyJ2IjoiMSJ9.C9SLVUjv0r18icXkkOoAidlO9At97Aeiv2I29DnqQCXw71hEG5zbPcXVjumWyXj5sFNQuG-CmcCXroB6UWff3zoKR29EQicGfBRU0tPYoXBleHRkdHbrhuwdlZW6bDPDzk5lpS59pP41jVyKfIx_AbK5hnlPgD4n6-DNnD_BQKbvOO-Y0yf6jdAtrsqrxKUw1SA6QwjtBfZB7WHJIs8i3cf3XGmGUwbfwWncYfbmwf8SQHBH00rSa2IbWueOikqFVirja-bLsThNGMnxK9UFvJfPjVoDl62XTxLLOUI-Tug.cLMy32cC1XaBYIwDTHMgUokdbqQet91mtvUHMt2vbCs&dib_tag=se&keywords=psu&qid=1731618301&refinements=p_72%3A1248879011&rnid=1248877011&s=electronics&sprefix=psu%2Caps%2C191&sr=1-20&th=1 https://www.amazon.com/ESGAMING-600W-Supply-Auto-Thermally-Controlled/dp/B0CYC5GN5M?crid=2FMTJ0UWOTNC2&dib=eyJ2IjoiMSJ9.C9SLVUjv0r18icXkkOoAidlO9At97Aeiv2I29DnqQCXw71hEG5zbPcXVjumWyXj5sFNQuG-CmcCXroB6UWff3zoKR29EQicGfBRU0tPYoXBleHRkdHbrhuwdlZW6bDPDzk5lpS59pP41jVyKfIx_AbK5hnlPgD4n6-DNnD_BQKbvOO-Y0yf6jdAtrsqrxKUw1SA6QwjtBfZB7WHJIs8i3cf3XGmGUwbfwWncYfbmwf8SQHBH00rSa2IbWueOikqFVirja-bLsThNGMnxK9UFvJfPjVoDl62XTxLLOUI-Tug.cLMy32cC1XaBYIwDTHMgUokdbqQet91mtvUHMt2vbCs&dib_tag=se&keywords=psu&qid=1731618301&refinements=p_72%3A1248879011&rnid=1248877011&s=electronics&sprefix=psu%2Caps%2C191&sr=1-21&th=1 https://www.amazon.com/SilverStone-Technology-SST-SX500-G-Improved-Capacitors/dp/B075M5FRQS?crid=2FMTJ0UWOTNC2&dib=eyJ2IjoiMSJ9.C9SLVUjv0r18icXkkOoAidlO9At97Aeiv2I29DnqQCXw71hEG5zbPcXVjumWyXj5sFNQuG-CmcCXroB6UWff3zoKR29EQicGfBRU0tPYoXBleHRkdHbrhuwdlZW6bDPDzk5lpS59pP41jVyKfIx_AbK5hnlPgD4n6-DNnD_BQKbvOO-Y0yf6jdAtrsqrxKUw1SA6QwjtBfZB7WHJIs8i3cf3XGmGUwbfwWncYfbmwf8SQHBH00rSa2IbWueOikqFVirja-bLsThNGMnxK9UFvJfPjVoDl62XTxLLOUI-Tug.cLMy32cC1XaBYIwDTHMgUokdbqQet91mtvUHMt2vbCs&dib_tag=se&keywords=psu&qid=1731618301&refinements=p_72%3A1248879011&rnid=1248877011&s=electronics&sprefix=psu%2Caps%2C191&sr=1-26&th=1 https://www.amazon.com/ASUS-heatsinks-Axial-tech-Technology-Certification/dp/B08X7BKLWS?crid=2FMTJ0UWOTNC2&dib=eyJ2IjoiMSJ9.Zs7mtoLNxOJDygwaA_C7N7vxfFIthLSnNG93NzznpBumsM2DWOyKPX-pEmsa69vly-7urCJ1Wng-ke2_miFEfQ.7KYRjMV3gshijlS9B_nFmMpTCOiNS0gle_IacGMq-rQ&dib_tag=se&keywords=psu&qid=1731618331&refinements=p_72%3A1248879011&rnid=1248877011&s=electronics&sprefix=psu%2Caps%2C191&sr=1-29&th=1 https://www.amazon.com/Corsair-RM750x-Fully-Modular-Supply/dp/B08R5W27JS?crid=2FMTJ0UWOTNC2&dib=eyJ2IjoiMSJ9.C9SLVUjv0r18icXkkOoAidlO9At97Aeiv2I29DnqQCXw71hEG5zbPcXVjumWyXj5sFNQuG-CmcCXroB6UWff3zoKR29EQicGfBRU0tPYoXBleHRkdHbrhuwdlZW6bDPDzk5lpS59pP41jVyKfIx_AbK5hnlPgD4n6-DNnD_BQKbvOO-Y0yf6jdAtrsqrxKUw1SA6QwjtBfZB7WHJIs8i3cf3XGmGUwbfwWncYfbmwf8SQHBH00rSa2IbWueOikqFVirja-bLsThNGMnxK9UFvJfPjVoDl62XTxLLOUI-Tug.cLMy32cC1XaBYIwDTHMgUokdbqQet91mtvUHMt2vbCs&dib_tag=se&keywords=psu&qid=1731618301&refinements=p_72%3A1248879011&rnid=1248877011&s=electronics&sprefix=psu%2Caps%2C191&sr=1-1&th=1 https://www.amazon.com/Thermaltake-Certified-Continuous-cooling-PS-SPD-0500NPCWUS-W/dp/B014W3EM2W?crid=2FMTJ0UWOTNC2&dib=eyJ2IjoiMSJ9.C9SLVUjv0r18icXkkOoAidlO9At97Aeiv2I29DnqQCXw71hEG5zbPcXVjumWyXj5sFNQuG-CmcCXroB6UWff3zoKR29EQicGfBRU0tPYoXBleHRkdHbrhuwdlZW6bDPDzk5lpS59pP41jVyKfIx_AbK5hnlPgD4n6-DNnD_BQKbvOO-Y0yf6jdAtrsqrxKUw1SA6QwjtBfZB7WHJIs8i3cf3XGmGUwbfwWncYfbmwf8SQHBH00rSa2IbWueOikqFVirja-bLsThNGMnxK9UFvJfPjVoDl62XTxLLOUI-Tug.cLMy32cC1XaBYIwDTHMgUokdbqQet91mtvUHMt2vbCs&dib_tag=se&keywords=psu&qid=1731618301&refinements=p_72%3A1248879011&rnid=1248877011&s=electronics&sprefix=psu%2Caps%2C191&sr=1-2&th=1 https://www.amazon.com/MSI-A550BN-Gaming-Power-Supplyr/dp/B0991W1HKT?crid=2FMTJ0UWOTNC2&dib=eyJ2IjoiMSJ9.C9SLVUjv0r18icXkkOoAidlO9At97Aeiv2I29DnqQCXw71hEG5zbPcXVjumWyXj5sFNQuG-CmcCXroB6UWff3zoKR29EQicGfBRU0tPYoXBleHRkdHbrhuwdlZW6bDPDzk5lpS59pP41jVyKfIx_AbK5hnlPgD4n6-DNnD_BQKbvOO-Y0yf6jdAtrsqrxKUw1SA6QwjtBfZB7WHJIs8i3cf3XGmGUwbfwWncYfbmwf8SQHBH00rSa2IbWueOikqFVirja-bLsThNGMnxK9UFvJfPjVoDl62XTxLLOUI-Tug.cLMy32cC1XaBYIwDTHMgUokdbqQet91mtvUHMt2vbCs&dib_tag=se&keywords=psu&qid=1731618301&refinements=p_72%3A1248879011&rnid=1248877011&s=electronics&sprefix=psu%2Caps%2C191&sr=1-3&th=1 https://www.amazon.com/MSI-MAG-A750GL-Gaming-Supply/dp/B0CC3QBGDL?crid=2FMTJ0UWOTNC2&dib=eyJ2IjoiMSJ9.C9SLVUjv0r18icXkkOoAidlO9At97Aeiv2I29DnqQCXw71hEG5zbPcXVjumWyXj5sFNQuG-CmcCXroB6UWff3zoKR29EQicGfBRU0tPYoXBleHRkdHbrhuwdlZW6bDPDzk5lpS59pP41jVyKfIx_AbK5hnlPgD4n6-DNnD_BQKbvOO-Y0yf6jdAtrsqrxKUw1SA6QwjtBfZB7WHJIs8i3cf3XGmGUwbfwWncYfbmwf8SQHBH00rSa2IbWueOikqFVirja-bLsThNGMnxK9UFvJfPjVoDl62XTxLLOUI-Tug.cLMy32cC1XaBYIwDTHMgUokdbqQet91mtvUHMt2vbCs&dib_tag=se&keywords=psu&qid=1731618301&refinements=p_72%3A1248879011&rnid=1248877011&s=electronics&sprefix=psu%2Caps%2C191&sr=1-4&th=1 https://www.amazon.com/Cooler-Master-Efficiency-Capacitors-Hexagonal/dp/B0D68TLYKR?crid=2FMTJ0UWOTNC2&dib=eyJ2IjoiMSJ9.C9SLVUjv0r18icXkkOoAidlO9At97Aeiv2I29DnqQCXw71hEG5zbPcXVjumWyXj5sFNQuG-CmcCXroB6UWff3zoKR29EQicGfBRU0tPYoXBleHRkdHbrhuwdlZW6bDPDzk5lpS59pP41jVyKfIx_AbK5hnlPgD4n6-DNnD_BQKbvOO-Y0yf6jdAtrsqrxKUw1SA6QwjtBfZB7WHJIs8i3cf3XGmGUwbfwWncYfbmwf8SQHBH00rSa2IbWueOikqFVirja-bLsThNGMnxK9UFvJfPjVoDl62XTxLLOUI-Tug.cLMy32cC1XaBYIwDTHMgUokdbqQet91mtvUHMt2vbCs&dib_tag=se&keywords=psu&qid=1731618301&refinements=p_72%3A1248879011&rnid=1248877011&s=electronics&sprefix=psu%2Caps%2C191&sr=1-5&th=1 https://www.amazon.com/MSI-A1000G-Gaming-Power-Supply/dp/B0B434DB7Y?crid=2FMTJ0UWOTNC2&dib=eyJ2IjoiMSJ9.C9SLVUjv0r18icXkkOoAidlO9At97Aeiv2I29DnqQCXw71hEG5zbPcXVjumWyXj5sFNQuG-CmcCXroB6UWff3zoKR29EQicGfBRU0tPYoXBleHRkdHbrhuwdlZW6bDPDzk5lpS59pP41jVyKfIx_AbK5hnlPgD4n6-DNnD_BQKbvOO-Y0yf6jdAtrsqrxKUw1SA6QwjtBfZB7WHJIs8i3cf3XGmGUwbfwWncYfbmwf8SQHBH00rSa2IbWueOikqFVirja-bLsThNGMnxK9UFvJfPjVoDl62XTxLLOUI-Tug.cLMy32cC1XaBYIwDTHMgUokdbqQet91mtvUHMt2vbCs&dib_tag=se&keywords=psu&qid=1731618301&refinements=p_72%3A1248879011&rnid=1248877011&s=electronics&sprefix=psu%2Caps%2C191&sr=1-6&th=1 https://www.amazon.com/NZXT-C1000-PSU-PA-0G1BB-US-Certified/dp/B09YZ33Z46?crid=2FMTJ0UWOTNC2&dib=eyJ2IjoiMSJ9.C9SLVUjv0r18icXkkOoAidlO9At97Aeiv2I29DnqQCXw71hEG5zbPcXVjumWyXj5sFNQuG-CmcCXroB6UWff3zoKR29EQicGfBRU0tPYoXBleHRkdHbrhuwdlZW6bDPDzk5lpS59pP41jVyKfIx_AbK5hnlPgD4n6-DNnD_BQKbvOO-Y0yf6jdAtrsqrxKUw1SA6QwjtBfZB7WHJIs8i3cf3XGmGUwbfwWncYfbmwf8SQHBH00rSa2IbWueOikqFVirja-bLsThNGMnxK9UFvJfPjVoDl62XTxLLOUI-Tug.cLMy32cC1XaBYIwDTHMgUokdbqQet91mtvUHMt2vbCs&dib_tag=se&keywords=psu&qid=1731618301&refinements=p_72%3A1248879011&rnid=1248877011&s=electronics&sprefix=psu%2Caps%2C191&sr=1-7&th=1 https://www.amazon.com/Segotep-Supply-Certified-Gaming-Non-Modular/dp/B0832N5XF7?crid=2FMTJ0UWOTNC2&dib=eyJ2IjoiMSJ9.C9SLVUjv0r18icXkkOoAidlO9At97Aeiv2I29DnqQCXw71hEG5zbPcXVjumWyXj5sFNQuG-CmcCXroB6UWff3zoKR29EQicGfBRU0tPYoXBleHRkdHbrhuwdlZW6bDPDzk5lpS59pP41jVyKfIx_AbK5hnlPgD4n6-DNnD_BQKbvOO-Y0yf6jdAtrsqrxKUw1SA6QwjtBfZB7WHJIs8i3cf3XGmGUwbfwWncYfbmwf8SQHBH00rSa2IbWueOikqFVirja-bLsThNGMnxK9UFvJfPjVoDl62XTxLLOUI-Tug.cLMy32cC1XaBYIwDTHMgUokdbqQet91mtvUHMt2vbCs&dib_tag=se&keywords=psu&qid=1731618301&refinements=p_72%3A1248879011&rnid=1248877011&s=electronics&sprefix=psu%2Caps%2C191&sr=1-8&th=1 https://www.amazon.com/Corsair-SF1000L-Modular-Low-Noise-Supply/dp/B0BW9TG9ZY?crid=2FMTJ0UWOTNC2&dib=eyJ2IjoiMSJ9.C9SLVUjv0r18icXkkOoAidlO9At97Aeiv2I29DnqQCXw71hEG5zbPcXVjumWyXj5sFNQuG-CmcCXroB6UWff3zoKR29EQicGfBRU0tPYoXBleHRkdHbrhuwdlZW6bDPDzk5lpS59pP41jVyKfIx_AbK5hnlPgD4n6-DNnD_BQKbvOO-Y0yf6jdAtrsqrxKUw1SA6QwjtBfZB7WHJIs8i3cf3XGmGUwbfwWncYfbmwf8SQHBH00rSa2IbWueOikqFVirja-bLsThNGMnxK9UFvJfPjVoDl62XTxLLOUI-Tug.cLMy32cC1XaBYIwDTHMgUokdbqQet91mtvUHMt2vbCs&dib_tag=se&keywords=psu&qid=1731618301&refinements=p_72%3A1248879011&rnid=1248877011&s=electronics&sprefix=psu%2Caps%2C191&sr=1-9&th=1 https://www.amazon.com/Thermaltake-Toughpower-Connectors-Crossfire-PS-TPD-0750FNFAGU-L/dp/B0C1JKB652?crid=2FMTJ0UWOTNC2&dib=eyJ2IjoiMSJ9.C9SLVUjv0r18icXkkOoAidlO9At97Aeiv2I29DnqQCXw71hEG5zbPcXVjumWyXj5sFNQuG-CmcCXroB6UWff3zoKR29EQicGfBRU0tPYoXBleHRkdHbrhuwdlZW6bDPDzk5lpS59pP41jVyKfIx_AbK5hnlPgD4n6-DNnD_BQKbvOO-Y0yf6jdAtrsqrxKUw1SA6QwjtBfZB7WHJIs8i3cf3XGmGUwbfwWncYfbmwf8SQHBH00rSa2IbWueOikqFVirja-bLsThNGMnxK9UFvJfPjVoDl62XTxLLOUI-Tug.cLMy32cC1XaBYIwDTHMgUokdbqQet91mtvUHMt2vbCs&dib_tag=se&keywords=psu&qid=1731618301&refinements=p_72%3A1248879011&rnid=1248877011&s=electronics&sprefix=psu%2Caps%2C191&sr=1-10&th=1 https://www.amazon.com/Pystar-1000W-Supply-Modular-ES1000/dp/B096KCD9LD?crid=2FMTJ0UWOTNC2&dib=eyJ2IjoiMSJ9.C9SLVUjv0r18icXkkOoAidlO9At97Aeiv2I29DnqQCXw71hEG5zbPcXVjumWyXj5sFNQuG-CmcCXroB6UWff3zoKR29EQicGfBRU0tPYoXBleHRkdHbrhuwdlZW6bDPDzk5lpS59pP41jVyKfIx_AbK5hnlPgD4n6-DNnD_BQKbvOO-Y0yf6jdAtrsqrxKUw1SA6QwjtBfZB7WHJIs8i3cf3XGmGUwbfwWncYfbmwf8SQHBH00rSa2IbWueOikqFVirja-bLsThNGMnxK9UFvJfPjVoDl62XTxLLOUI-Tug.cLMy32cC1XaBYIwDTHMgUokdbqQet91mtvUHMt2vbCs&dib_tag=se&keywords=psu&qid=1731618301&refinements=p_72%3A1248879011&rnid=1248877011&s=electronics&sprefix=psu%2Caps%2C191&sr=1-12 https://www.amazon.com/Ai1300P-PCIE5-Gaming-Power-Supply/dp/B0B433ZCRP?crid=2FMTJ0UWOTNC2&dib=eyJ2IjoiMSJ9.C9SLVUjv0r18icXkkOoAidlO9At97Aeiv2I29DnqQCXw71hEG5zbPcXVjumWyXj5sFNQuG-CmcCXroB6UWff3zoKR29EQicGfBRU0tPYoXBleHRkdHbrhuwdlZW6bDPDzk5lpS59pP41jVyKfIx_AbK5hnlPgD4n6-DNnD_BQKbvOO-Y0yf6jdAtrsqrxKUw1SA6QwjtBfZB7WHJIs8i3cf3XGmGUwbfwWncYfbmwf8SQHBH00rSa2IbWueOikqFVirja-bLsThNGMnxK9UFvJfPjVoDl62XTxLLOUI-Tug.cLMy32cC1XaBYIwDTHMgUokdbqQet91mtvUHMt2vbCs&dib_tag=se&keywords=psu&qid=1731618301&refinements=p_72%3A1248879011&rnid=1248877011&s=electronics&sprefix=psu%2Caps%2C191&sr=1-13&th=1 https://www.amazon.com/quiet-BN516-Straight-12-1000w-connectors/dp/B0CC821H5S?crid=2FMTJ0UWOTNC2&dib=eyJ2IjoiMSJ9.C9SLVUjv0r18icXkkOoAidlO9At97Aeiv2I29DnqQCXw71hEG5zbPcXVjumWyXj5sFNQuG-CmcCXroB6UWff3zoKR29EQicGfBRU0tPYoXBleHRkdHbrhuwdlZW6bDPDzk5lpS59pP41jVyKfIx_AbK5hnlPgD4n6-DNnD_BQKbvOO-Y0yf6jdAtrsqrxKUw1SA6QwjtBfZB7WHJIs8i3cf3XGmGUwbfwWncYfbmwf8SQHBH00rSa2IbWueOikqFVirja-bLsThNGMnxK9UFvJfPjVoDl62XTxLLOUI-Tug.cLMy32cC1XaBYIwDTHMgUokdbqQet91mtvUHMt2vbCs&dib_tag=se&keywords=psu&qid=1731618301&refinements=p_72%3A1248879011&rnid=1248877011&s=electronics&sprefix=psu%2Caps%2C191&sr=1-14&th=1 https://www.amazon.com/700W-Modular-Connectors-Auto-Thermally-Controlled/dp/B0CZRH5TMJ?crid=2FMTJ0UWOTNC2&dib=eyJ2IjoiMSJ9.C9SLVUjv0r18icXkkOoAidlO9At97Aeiv2I29DnqQCXw71hEG5zbPcXVjumWyXj5sFNQuG-CmcCXroB6UWff3zoKR29EQicGfBRU0tPYoXBleHRkdHbrhuwdlZW6bDPDzk5lpS59pP41jVyKfIx_AbK5hnlPgD4n6-DNnD_BQKbvOO-Y0yf6jdAtrsqrxKUw1SA6QwjtBfZB7WHJIs8i3cf3XGmGUwbfwWncYfbmwf8SQHBH00rSa2IbWueOikqFVirja-bLsThNGMnxK9UFvJfPjVoDl62XTxLLOUI-Tug.cLMy32cC1XaBYIwDTHMgUokdbqQet91mtvUHMt2vbCs&dib_tag=se&keywords=psu&qid=1731618301&refinements=p_72%3A1248879011&rnid=1248877011&s=electronics&sprefix=psu%2Caps%2C191&sr=1-15&th=1 https://www.amazon.com/FSP-Computer-Titanium-Eco-Friendly-HTI-1000M-GEN5/dp/B0D467S15T?crid=2FMTJ0UWOTNC2&dib=eyJ2IjoiMSJ9.C9SLVUjv0r18icXkkOoAidlO9At97Aeiv2I29DnqQCXw71hEG5zbPcXVjumWyXj5sFNQuG-CmcCXroB6UWff3zoKR29EQicGfBRU0tPYoXBleHRkdHbrhuwdlZW6bDPDzk5lpS59pP41jVyKfIx_AbK5hnlPgD4n6-DNnD_BQKbvOO-Y0yf6jdAtrsqrxKUw1SA6QwjtBfZB7WHJIs8i3cf3XGmGUwbfwWncYfbmwf8SQHBH00rSa2IbWueOikqFVirja-bLsThNGMnxK9UFvJfPjVoDl62XTxLLOUI-Tug.cLMy32cC1XaBYIwDTHMgUokdbqQet91mtvUHMt2vbCs&dib_tag=se&keywords=psu&qid=1731618301&refinements=p_72%3A1248879011&rnid=1248877011&s=electronics&sprefix=psu%2Caps%2C191&sr=1-16&th=1"
    asins = get_asins_from_string(urls_string)
    save_asins_to_csv(asins)
    print(asins)
    