import csv

def extract_asin(url):
    try:
        # Find the position of /dp/ and the following ? or end of string
        dp_index = url.find('/dp/')
        if dp_index == -1:
            return None
        
        # Start after /dp/
        start = dp_index + 4
        
        # Find end position (either ? or end of string)
        end = url.find('?', start)
        if end == -1:
            end = len(url)
            
        # Extract ASIN
        asin = url[start:end]
        
        # Validate ASIN format (typically 10 characters)
        if len(asin) == 10:
            return asin
        return None
    
    except Exception:
        return None

def get_asins_from_urls(urls):
    asins = []
    for url in urls:
        asin = extract_asin(url)
        if asin:
            asins.append(asin)
    return asins

def save_asins_to_csv(asins, filename='amazon_asins.csv'):
    # Write ASINs to CSV with header
    with open(filename, 'w', newline='') as file:
        writer = csv.writer(file)
        writer.writerow(['ASIN'])  # Header
        for asin in asins:
            writer.writerow([asin])


# Example usage
if __name__ == "__main__":
    test_urls = ["https://www.amazon.com/SAMSUNG-Internal-Expansion-MZ-V9P2T0B-AM/dp/B0BHJJ9Y77?crid=3OIV2KLMTT12N&dib=eyJ2IjoiMSJ9.hq65CJZCZBtlQXwi__p7XYEJmT6NcorgVtl3qKPPadQ6JoUc-Jk4IXRFkVqaPpTDX1n-frVSC2s38HkIVi1FKKOlXGyiphy11ywmK28JTj0-WFM0qQL2FJuQy-ZLp9-XGz4wEBftc0VWtWfstNnjxngFRXZq7SFF9y77w8rhA8BOTTm8wDnadTGgULaQrX7uvVU9ZQEicgS2wWxKhF7veThUm5DOtvqV_83u9koXbURcr-nzr2skp6w5qE6h2BSo838nmbhCv8A_lizrBJ6b6xZSYuKNhWMQdv2R1x5MeJ4.Is_IX1YXWL92kbGQcBnfwJsmxZYoWCJrtKcYeAXiBls&dib_tag=se&keywords=nvme%2Bm.2%2Bssd&qid=1731536219&s=electronics&sprefix=nvme%2Bm.2%2Bssd%2Celectronics%2C158&sr=1-1&th=1", "https://www.amazon.com/Samsung-Internal-Computer-MZ-V9E1T0B-AM/dp/B0CRCC9863?crid=3OIV2KLMTT12N&dib=eyJ2IjoiMSJ9.hq65CJZCZBtlQXwi__p7XYEJmT6NcorgVtl3qKPPadQ6JoUc-Jk4IXRFkVqaPpTDX1n-frVSC2s38HkIVi1FKKOlXGyiphy11ywmK28JTj0-WFM0qQL2FJuQy-ZLp9-XGz4wEBftc0VWtWfstNnjxngFRXZq7SFF9y77w8rhA8BOTTm8wDnadTGgULaQrX7uvVU9ZQEicgS2wWxKhF7veThUm5DOtvqV_83u9koXbURcr-nzr2skp6w5qE6h2BSo838nmbhCv8A_lizrBJ6b6xZSYuKNhWMQdv2R1x5MeJ4.Is_IX1YXWL92kbGQcBnfwJsmxZYoWCJrtKcYeAXiBls&dib_tag=se&keywords=nvme%2Bm.2%2Bssd&qid=1731536219&s=electronics&sprefix=nvme%2Bm.2%2Bssd%2Celectronics%2C158&sr=1-2&th=1", "https://www.amazon.com/Crucial-Plus-PCIe-NAND-5000MB/dp/B0B25ML2FH?crid=3OIV2KLMTT12N&dib=eyJ2IjoiMSJ9.hq65CJZCZBtlQXwi__p7XYEJmT6NcorgVtl3qKPPadQ6JoUc-Jk4IXRFkVqaPpTDX1n-frVSC2s38HkIVi1FKKOlXGyiphy11ywmK28JTj0-WFM0qQL2FJuQy-ZLp9-XGz4wEBftc0VWtWfstNnjxngFRXZq7SFF9y77w8rhA8BOTTm8wDnadTGgULaQrX7uvVU9ZQEicgS2wWxKhF7veThUm5DOtvqV_83u9koXbURcr-nzr2skp6w5qE6h2BSo838nmbhCv8A_lizrBJ6b6xZSYuKNhWMQdv2R1x5MeJ4.Is_IX1YXWL92kbGQcBnfwJsmxZYoWCJrtKcYeAXiBls&dib_tag=se&keywords=nvme%2Bm.2%2Bssd&qid=1731536219&s=electronics&sprefix=nvme%2Bm.2%2Bssd%2Celectronics%2C158&sr=1-3&th=1", "https://www.amazon.com/WD_BLACK-SN850X-Internal-Gaming-Solid/dp/B0B7CMZ3QH?crid=3OIV2KLMTT12N&dib=eyJ2IjoiMSJ9.hq65CJZCZBtlQXwi__p7XYEJmT6NcorgVtl3qKPPadQ6JoUc-Jk4IXRFkVqaPpTDX1n-frVSC2s38HkIVi1FKKOlXGyiphy11ywmK28JTj0-WFM0qQL2FJuQy-ZLp9-XGz4wEBftc0VWtWfstNnjxngFRXZq7SFF9y77w8rhA8BOTTm8wDnadTGgULaQrX7uvVU9ZQEicgS2wWxKhF7veThUm5DOtvqV_83u9koXbURcr-nzr2skp6w5qE6h2BSo838nmbhCv8A_lizrBJ6b6xZSYuKNhWMQdv2R1x5MeJ4.Is_IX1YXWL92kbGQcBnfwJsmxZYoWCJrtKcYeAXiBls&dib_tag=se&keywords=nvme+m.2+ssd&qid=1731536219&s=electronics&sprefix=nvme+m.2+ssd%2Celectronics%2C158&sr=1-4", "https://www.amazon.com/Western-Digital-Officially-Licensed-Expansion/dp/B0C47ZX1WB?crid=3OIV2KLMTT12N&dib=eyJ2IjoiMSJ9.hq65CJZCZBtlQXwi__p7XYEJmT6NcorgVtl3qKPPadQ6JoUc-Jk4IXRFkVqaPpTDX1n-frVSC2s38HkIVi1FKKOlXGyiphy11ywmK28JTj0-WFM0qQL2FJuQy-ZLp9-XGz4wEBftc0VWtWfstNnjxngFRXZq7SFF9y77w8rhA8BOTTm8wDnadTGgULaQrX7uvVU9ZQEicgS2wWxKhF7veThUm5DOtvqV_83u9koXbURcr-nzr2skp6w5qE6h2BSo838nmbhCv8A_lizrBJ6b6xZSYuKNhWMQdv2R1x5MeJ4.Is_IX1YXWL92kbGQcBnfwJsmxZYoWCJrtKcYeAXiBls&dib_tag=se&keywords=nvme%2Bm.2%2Bssd&qid=1731536219&s=electronics&sprefix=nvme%2Bm.2%2Bssd%2Celectronics%2C158&sr=1-8&th=1", "https://www.amazon.com/WD_BLACK-SN770-Internal-Gaming-Solid/dp/B09QV692XY?crid=3OIV2KLMTT12N&dib=eyJ2IjoiMSJ9.hq65CJZCZBtlQXwi__p7XYEJmT6NcorgVtl3qKPPadQ6JoUc-Jk4IXRFkVqaPpTDX1n-frVSC2s38HkIVi1FKKOlXGyiphy11ywmK28JTj0-WFM0qQL2FJuQy-ZLp9-XGz4wEBftc0VWtWfstNnjxngFRXZq7SFF9y77w8rhA8BOTTm8wDnadTGgULaQrX7uvVU9ZQEicgS2wWxKhF7veThUm5DOtvqV_83u9koXbURcr-nzr2skp6w5qE6h2BSo838nmbhCv8A_lizrBJ6b6xZSYuKNhWMQdv2R1x5MeJ4.Is_IX1YXWL92kbGQcBnfwJsmxZYoWCJrtKcYeAXiBls&dib_tag=se&keywords=nvme%2Bm.2%2Bssd&qid=1731536219&s=electronics&sprefix=nvme%2Bm.2%2Bssd%2Celectronics%2C158&sr=1-9&th=1", "https://www.amazon.com/Kingston-2280-Internal-SNV2S-1000G/dp/B0BBWH1R8H?crid=3OIV2KLMTT12N&dib=eyJ2IjoiMSJ9.hq65CJZCZBtlQXwi__p7XYEJmT6NcorgVtl3qKPPadQ6JoUc-Jk4IXRFkVqaPpTDX1n-frVSC2s38HkIVi1FKKOlXGyiphy11ywmK28JTj0-WFM0qQL2FJuQy-ZLp9-XGz4wEBftc0VWtWfstNnjxngFRXZq7SFF9y77w8rhA8BOTTm8wDnadTGgULaQrX7uvVU9ZQEicgS2wWxKhF7veThUm5DOtvqV_83u9koXbURcr-nzr2skp6w5qE6h2BSo838nmbhCv8A_lizrBJ6b6xZSYuKNhWMQdv2R1x5MeJ4.Is_IX1YXWL92kbGQcBnfwJsmxZYoWCJrtKcYeAXiBls&dib_tag=se&keywords=nvme%2Bm.2%2Bssd&qid=1731536219&s=electronics&sprefix=nvme%2Bm.2%2Bssd%2Celectronics%2C158&sr=1-10&th=1", "https://www.amazon.com/Crucial-PCIe-NAND-NVMe-3500MB/dp/B0B25LZGGW?crid=3OIV2KLMTT12N&dib=eyJ2IjoiMSJ9.hq65CJZCZBtlQXwi__p7XYEJmT6NcorgVtl3qKPPadQ6JoUc-Jk4IXRFkVqaPpTDX1n-frVSC2s38HkIVi1FKKOlXGyiphy11ywmK28JTj0-WFM0qQL2FJuQy-ZLp9-XGz4wEBftc0VWtWfstNnjxngFRXZq7SFF9y77w8rhA8BOTTm8wDnadTGgULaQrX7uvVU9ZQEicgS2wWxKhF7veThUm5DOtvqV_83u9koXbURcr-nzr2skp6w5qE6h2BSo838nmbhCv8A_lizrBJ6b6xZSYuKNhWMQdv2R1x5MeJ4.Is_IX1YXWL92kbGQcBnfwJsmxZYoWCJrtKcYeAXiBls&dib_tag=se&keywords=nvme%2Bm.2%2Bssd&qid=1731536219&s=electronics&sprefix=nvme%2Bm.2%2Bssd%2Celectronics%2C158&sr=1-11&th=1", "https://www.amazon.com/Western-Digital-SN580-Internal-Solid/dp/B0C8WPRM9T?crid=3OIV2KLMTT12N&dib=eyJ2IjoiMSJ9.hq65CJZCZBtlQXwi__p7XYEJmT6NcorgVtl3qKPPadQ6JoUc-Jk4IXRFkVqaPpTDX1n-frVSC2s38HkIVi1FKKOlXGyiphy11ywmK28JTj0-WFM0qQL2FJuQy-ZLp9-XGz4wEBftc0VWtWfstNnjxngFRXZq7SFF9y77w8rhA8BOTTm8wDnadTGgULaQrX7uvVU9ZQEicgS2wWxKhF7veThUm5DOtvqV_83u9koXbURcr-nzr2skp6w5qE6h2BSo838nmbhCv8A_lizrBJ6b6xZSYuKNhWMQdv2R1x5MeJ4.Is_IX1YXWL92kbGQcBnfwJsmxZYoWCJrtKcYeAXiBls&dib_tag=se&keywords=nvme%2Bm.2%2Bssd&qid=1731536219&s=electronics&sprefix=nvme%2Bm.2%2Bssd%2Celectronics%2C158&sr=1-13&th=1", "https://www.amazon.com/Technology-Intelligent-Turbowrite-MZ-V8V1T0B-AM/dp/B08V83JZH4?crid=3OIV2KLMTT12N&dib=eyJ2IjoiMSJ9.hq65CJZCZBtlQXwi__p7XYEJmT6NcorgVtl3qKPPadQ6JoUc-Jk4IXRFkVqaPpTDX1n-frVSC2s38HkIVi1FKKOlXGyiphy11ywmK28JTj0-WFM0qQL2FJuQy-ZLp9-XGz4wEBftc0VWtWfstNnjxngFRXZq7SFF9y77w8rhA8BOTTm8wDnadTGgULaQrX7uvVU9ZQEicgS2wWxKhF7veThUm5DOtvqV_83u9koXbURcr-nzr2skp6w5qE6h2BSo838nmbhCv8A_lizrBJ6b6xZSYuKNhWMQdv2R1x5MeJ4.Is_IX1YXWL92kbGQcBnfwJsmxZYoWCJrtKcYeAXiBls&dib_tag=se&keywords=nvme%2Bm.2%2Bssd&qid=1731536219&s=electronics&sprefix=nvme%2Bm.2%2Bssd%2Celectronics%2C158&sr=1-16&th=1", "https://www.amazon.com/Samsung-970-EVO-Plus-MZ-V7S2T0B/dp/B07MFZXR1B?crid=3OIV2KLMTT12N&dib=eyJ2IjoiMSJ9.hq65CJZCZBtlQXwi__p7XYEJmT6NcorgVtl3qKPPadQ6JoUc-Jk4IXRFkVqaPpTDX1n-frVSC2s38HkIVi1FKKOlXGyiphy11ywmK28JTj0-WFM0qQL2FJuQy-ZLp9-XGz4wEBftc0VWtWfstNnjxngFRXZq7SFF9y77w8rhA8BOTTm8wDnadTGgULaQrX7uvVU9ZQEicgS2wWxKhF7veThUm5DOtvqV_83u9koXbURcr-nzr2skp6w5qE6h2BSo838nmbhCv8A_lizrBJ6b6xZSYuKNhWMQdv2R1x5MeJ4.Is_IX1YXWL92kbGQcBnfwJsmxZYoWCJrtKcYeAXiBls&dib_tag=se&keywords=nvme%2Bm.2%2Bssd&qid=1731536219&s=electronics&sprefix=nvme%2Bm.2%2Bssd%2Celectronics%2C158&sr=1-18&th=1", "https://www.amazon.com/Crucial-P310-2280-PCIe-Gen4/dp/B0DC8RVRBZ?crid=3OIV2KLMTT12N&dib=eyJ2IjoiMSJ9.hq65CJZCZBtlQXwi__p7XYEJmT6NcorgVtl3qKPPadQ6JoUc-Jk4IXRFkVqaPpTDX1n-frVSC2s38HkIVi1FKKOlXGyiphy11ywmK28JTj0-WFM0qQL2FJuQy-ZLp9-XGz4wEBftc0VWtWfstNnjxngFRXZq7SFF9y77w8rhA8BOTTm8wDnadTGgULaQrX7uvVU9ZQEicgS2wWxKhF7veThUm5DOtvqV_83u9koXbURcr-nzr2skp6w5qE6h2BSo838nmbhCv8A_lizrBJ6b6xZSYuKNhWMQdv2R1x5MeJ4.Is_IX1YXWL92kbGQcBnfwJsmxZYoWCJrtKcYeAXiBls&dib_tag=se&keywords=nvme%2Bm.2%2Bssd&qid=1731536219&s=electronics&sprefix=nvme%2Bm.2%2Bssd%2Celectronics%2C158&sr=1-19&th=1", "https://www.amazon.com/Crucial-2024-T705-PCIe-Gen5/dp/B0CTRVZKG7?crid=3OIV2KLMTT12N&dib=eyJ2IjoiMSJ9.hq65CJZCZBtlQXwi__p7XYEJmT6NcorgVtl3qKPPadQ6JoUc-Jk4IXRFkVqaPpTDX1n-frVSC2s38HkIVi1FKKOlXGyiphy11ywmK28JTj0-WFM0qQL2FJuQy-ZLp9-XGz4wEBftc0VWtWfstNnjxngFRXZq7SFF9y77w8rhA8BOTTm8wDnadTGgULaQrX7uvVU9ZQEicgS2wWxKhF7veThUm5DOtvqV_83u9koXbURcr-nzr2skp6w5qE6h2BSo838nmbhCv8A_lizrBJ6b6xZSYuKNhWMQdv2R1x5MeJ4.Is_IX1YXWL92kbGQcBnfwJsmxZYoWCJrtKcYeAXiBls&dib_tag=se&keywords=nvme%2Bm.2%2Bssd&qid=1731536219&s=electronics&sprefix=nvme%2Bm.2%2Bssd%2Celectronics%2C158&sr=1-20&th=1", "https://www.amazon.com/Crucial-Internal-Gaming-Desktop-Compatible/dp/B0CK2TC9XQ?crid=3OIV2KLMTT12N&dib=eyJ2IjoiMSJ9.hq65CJZCZBtlQXwi__p7XYEJmT6NcorgVtl3qKPPadQ6JoUc-Jk4IXRFkVqaPpTDX1n-frVSC2s38HkIVi1FKKOlXGyiphy11ywmK28JTj0-WFM0qQL2FJuQy-ZLp9-XGz4wEBftc0VWtWfstNnjxngFRXZq7SFF9y77w8rhA8BOTTm8wDnadTGgULaQrX7uvVU9ZQEicgS2wWxKhF7veThUm5DOtvqV_83u9koXbURcr-nzr2skp6w5qE6h2BSo838nmbhCv8A_lizrBJ6b6xZSYuKNhWMQdv2R1x5MeJ4.Is_IX1YXWL92kbGQcBnfwJsmxZYoWCJrtKcYeAXiBls&dib_tag=se&keywords=nvme%2Bm.2%2Bssd&qid=1731536219&s=electronics&sprefix=nvme%2Bm.2%2Bssd%2Celectronics%2C158&sr=1-24&th=1", "https://www.amazon.com/Crucial-T700-Gen5-NVMe-CT2000T700SSD3/dp/B0C3K7MTSY?crid=3OIV2KLMTT12N&dib=eyJ2IjoiMSJ9.hq65CJZCZBtlQXwi__p7XYEJmT6NcorgVtl3qKPPadQ6JoUc-Jk4IXRFkVqaPpTDX1n-frVSC2s38HkIVi1FKKOlXGyiphy11ywmK28JTj0-WFM0qQL2FJuQy-ZLp9-XGz4wEBftc0VWtWfstNnjxngFRXZq7SFF9y77w8rhA8BOTTm8wDnadTGgULaQrX7uvVU9ZQEicgS2wWxKhF7veThUm5DOtvqV_83u9koXbURcr-nzr2skp6w5qE6h2BSo838nmbhCv8A_lizrBJ6b6xZSYuKNhWMQdv2R1x5MeJ4.Is_IX1YXWL92kbGQcBnfwJsmxZYoWCJrtKcYeAXiBls&dib_tag=se&keywords=nvme%2Bm.2%2Bssd&qid=1731536219&s=electronics&sprefix=nvme%2Bm.2%2Bssd%2Celectronics%2C158&sr=1-26&th=1", "https://www.amazon.com/TEAMGROUP-MP33-512GB-Gen3x4-TM8FP6512G0C101/dp/B07XJ2P1LK?crid=3OIV2KLMTT12N&dib=eyJ2IjoiMSJ9.0J3jz9SpZg1SkbIg5EmPGsH2zIyv4gERPDjxbiYywPz7L-plen0YATAMqQHAih1h5w4Nx-gbAyLEemUzETKzPg.wrzpqP9ooIgrvWcNDsSrrtJvKxuYLoa2NRzCUDh8n64&dib_tag=se&keywords=nvme%2Bm.2%2Bssd&qid=1731536253&s=electronics&sprefix=nvme%2Bm.2%2Bssd%2Celectronics%2C158&sr=1-26&th=1", "https://www.amazon.com/Samsung-Internal-Gaming-Editing-MZ-V9P4T0BW/dp/B0CBYZ6DD1?crid=3OIV2KLMTT12N&dib=eyJ2IjoiMSJ9.5hzVJV40pP6v8Sf1uHS0iJ1FWC8zeAQreA0ot-oMgMfNec6aaO2SUx73MNIWviFgjsUTV3_DB61QUhHHrBVOyQ.DzM-MohV5j0cDpbnigttHaZ94t2R_MnZzqew-tGPQO8&dib_tag=se&keywords=nvme+m.2+ssd&qid=1731536267&s=electronics&sprefix=nvme+m.2+ssd%2Celectronics%2C158&sr=1-53"]
    
    result = get_asins_from_urls(test_urls)
    save_asins_to_csv(result, 'asins.csv')
    print("Found ASINs:", result)